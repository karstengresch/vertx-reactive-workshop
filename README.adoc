= SCENARIO

image:images/design.png["VertX Application",height=356] 

== The Micro-Homeplan Application

This is a short description of the scenario we will be working throughout the labs

Itâ€™s going to be a fake home appliance IOT management app, where we will be able to regulate the temperature in different rooms at our home. The application is composed of a set of microservices:

*  The homeplan - this is a service which allows home owners to register and review their homeplan providing the temperature in each of the rooms in their house and the heat regulating applicances in each room. 

*  The device management - this is a component which receives registration and update requests on the devices.

* The sensor generator - this is a ficticious service emitting every 20 secs an event indicating the room temperature dependent on the state of the heating device (ON/OFF and INCREASING/DECREASING temperature)

* The homeplan regulator - this is a service which reads our current homeplan and based on the emmitted temperature in the room it regulates the action a device has to take to enforece the plan ie. INCREASE, DECREASE temperature of TURNOFF the device.


= LAB 1

TIME ESTIMATION 30 MINUTES
FOLLOWED by 15 MINUTES explain the solution


== Concepts in this LAB

- Verticle and instances
- HTTPServer
- EventLoop
- Launcher

== Organizers

. STEP 1     (ALL steps/names provided) Creatd a vertx project (using mvn archetype) 

[source,perl]
----
mvn io.fabric8:vertx-maven-plugin:1.0.5:setup -DprojectGroupId=io.vertx.microservice -DprojectArtifactId=hello-consumer-microservice-http -Dverticle=io.vertx.book.http.HelloConsumerMicroservice -Ddependencies=web
----
. STEP 2      (ALL steps/names provided) Review Verticle 
                 .. create a HelloWorld HTTP SERVER
                 ..  TEST IT
                 .. check EXTEND, check pom.xml etc.
. STEP 3      REAL LAB : generate the HTTP server & Use ROUTER to define the endpoints
     - (US) provide a method to get/save the HomePlan into the shared data a LOCAL Varaibale
     - (US) provide a dummy method for "send device reg event"
     - (US) Hoe to encode/decode JSON??
     - (US) Objects

* as an extra show  DURING last 15 minutes 
* how to start multiple Verticle Instances and what it means from HTTP 
* Request handling (Event Loop, Verticle Instance)

== Participants

. HTTP Server & simple service calling (problem not-reactive as not resillient/scalable)
    .. Create Content for verticles in HomePlan
    ..  [REST] [GET] /homeplan/{id}
    ..  [REST] [POST/PUT/GET] /homeplan 
. TESTS
Run Vert.X outside OCP with vertx-maven-plugin
[source,perl]
----
  mvn compile vertx:run"
----

   . REGISTER Homeplan
   . GET all IDs of Homeplans Registred
   . GET Homeplan by ID
   . UPDATE Homeplan

     Run outside OCP
     Pre-Requisites: send device-reg message (we provide dummy console log output)

= LAB 2

= LAB 3

= LAB 4

= LAB 5

